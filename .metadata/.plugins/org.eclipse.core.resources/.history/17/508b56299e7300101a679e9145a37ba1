package royanmobiletesting;

import java.net.MalformedURLException;
import java.net.URISyntaxException;
import java.util.List;

import org.openqa.selenium.WebElement;
import org.openqa.selenium.interactions.Actions;
import org.testng.annotations.Test;

import io.appium.java_client.AppiumBy;

public class StepperPress extends BaseTest{
   
	@Test
	public void StepperPressed() throws MalformedURLException, URISyntaxException, InterruptedException {
		driver.findElement(AppiumBy.iOSClassChain("**/XCUIElementTypeStaticText[`name == \"Steppers\"`]")).click();
		driver.findElement(AppiumBy.iOSNsPredicateString("name == \"DEFAULT\" AND label == \"DEFAULT\"")).click();
		Thread.sleep(5000);
		 driver.findElement(AppiumBy.iOSNsPredicateString("name == \"DEFAULT\" AND label == \"DEFAULT\"")).click();
		    Thread.sleep(2000);

		    // Get all Decrement and Increment buttons
		    List<WebElement> decrementButtons = driver.findElements(AppiumBy.iOSClassChain("**/XCUIElementTypeButton[`name == \"Decrement\"`]"));
		    List<WebElement> incrementButtons = driver.findElements(AppiumBy.iOSClassChain("**/XCUIElementTypeButton[`name == \"Increment\"`]"));

		    System.out.println("Decrement buttons found: " + decrementButtons.size());
		    System.out.println("Increment buttons found: " + incrementButtons.size());

		    Actions actions = new Actions(driver);

		    for (int i = 0; i < 3; i++) {
		        if (i < decrementButtons.size()) {
		            WebElement dec = decrementButtons.get(i);
		            System.out.println("Decrement[" + i + "] isDisplayed: " + dec.isDisplayed() + ", isEnabled: " + dec.isEnabled());

		            // Use Actions instead of click()
		            actions.moveToElement(dec).click().perform();
		            System.out.println("Clicked Decrement[" + i + "]");
		        } else {
		            System.out.println("Decrement[" + i + "] not found.");
		        }

		        Thread.sleep(2000);

		        if (i < incrementButtons.size()) {
		            WebElement inc = incrementButtons.get(i);
		            System.out.println("Increment[" + i + "] isDisplayed: " + inc.isDisplayed() + ", isEnabled: " + inc.isEnabled());

		            inc.click(); // Normal click should work for Increment
		            System.out.println("Clicked Increment[" + i + "]");
		        } else {
		            System.out.println("Increment[" + i + "] not found.");
		        }

		        Thread.sleep(2000);
	}
	}
	
}
